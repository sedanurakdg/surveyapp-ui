<app-page
  title="Anketlerim"
  subtitle="Atanmış anketlerini görüntüleyip doldurabilirsin."
  maxWidth="lg"
>
  <app-card padded="md">
    <ng-container *ngIf="surveys$ | async as surveys; else loading">
      <div class="empty" *ngIf="surveys.length === 0">Henüz atanmış anket bulunmuyor.</div>

      <div class="list" *ngIf="surveys.length > 0">
        <div class="row" *ngFor="let s of surveys">
          <div class="main">
            <div class="title">{{ s.title }}</div>
            <div class="meta">
              <span>Başlangıç: {{ s.startsAtUtc | date: 'dd.MM.yyyy HH:mm' }} /</span>
              <span>Bitiş: {{ s.endsAtUtc | date: 'dd.MM.yyyy HH:mm' }}</span>
              <span class="badge" [class.done]="s.isSubmitted">
                {{ s.isSubmitted ? 'Gönderildi' : 'Bekliyor' }}
              </span>
            </div>
          </div>

          <div class="actions">
            <a [routerLink]="['/user/surveys', s.id]">
              <app-button
                variant="outline"
                size="sm"
                [text]="s.isSubmitted ? 'Görüntüle' : 'Doldur'"
              ></app-button>
            </a>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #loading> Yükleniyor... </ng-template>
  </app-card>
</app-page>
